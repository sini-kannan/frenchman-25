<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FRENCHAN</title>
    <link rel="icon" href="assets/shinchan.png" type="image/png">
    <link rel="apple-touch-icon" href="assets/shinchan.png">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Baloo+2:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <header>
            <div class="brand">
                <img src="assets/shinchan.png" alt="FRENCHAN logo" style="height:36px; vertical-align:middle;" />
            </div>
            <div class="progress-bar">
                <div class="progress" style="width: 0%"></div>
            </div>
            <div class="points-stack">
                <img id="header-avatar" class="header-avatar" src="assets/1.png" alt="Avatar">
                <div class="points">0 XP</div>
            </div>
        </header>

        <nav class="tab-navigation">
            <button class="tab-btn active" data-tab="home">Home</button>
            <button class="tab-btn" data-tab="vocabulary">Vocabulary</button>
            <button class="tab-btn" data-tab="listening">Listening</button>
            <button class="tab-btn" data-tab="dictionary">Dictionary</button>
            <button class="tab-btn" data-tab="profile">Profile</button>
        </nav>

        <main>
            <!-- Home Section -->
            <div id="home-section" class="section active">
                <div class="home-hero">
                    <div class="home-left">
                        <h1 class="home-title">Apprends le franÃ§ais avec FRENCHAN !</h1>
                        <p class="home-sub">Choisis ce que tu veux pratiquer aujourd'hui.</p>
                        <p id="home-greeting" class="home-greeting"></p>
                        <div class="home-actions">
                            <button class="home-nav-btn" data-tab="vocabulary">Start Vocabulary</button>
                            <button class="home-nav-btn" data-tab="listening">Practice Listening</button>
                            <button class="home-nav-btn" data-tab="dictionary">Open Dictionary</button>
                            <button class="home-nav-btn" data-tab="profile">Your Profile</button>
                        </div>
                    </div>
                    <div class="home-right">
                        <img class="home-hero-img" src="assets/shinchan.png" alt="Shinchan" />
                    </div>
                </div>
            </div>

            <!-- Vocabulary Section -->
            <div id="vocabulary-section" class="section">
                <div class="lesson-container">
                    <div class="vocab-controls">
                        <select id="learn-mode" title="Learning mode">
                            <option value="en-fr">EN â†’ FR</option>
                            <option value="fr-en">FR â†’ EN</option>
                        </select>
                        <div class="vocab-modes">
                            <button id="mode-translate" class="vocab-mode-btn active" data-mode="translate">Translate</button>
                            <button id="mode-image" class="vocab-mode-btn" data-mode="image">Image Quiz</button>
                        </div>
                    </div>

                    <!-- Translate Mode -->
                    <div id="translate-quiz" class="quiz-pane">
                        <div class="question">
                            <h2 id="question-title">Translate to French:</h2>
                            <p id="english-phrase">Hello</p>
                        </div>
                        
                        <div class="answer-input">
                            <input type="text" id="user-answer" placeholder="Type in French...">
                            <button id="check-answer">Check</button>
                        </div>

                        <div class="feedback hidden">
                            <p id="feedback-text"></p>
                            <button id="next-question">Continue</button>
                        </div>
                    </div>

                    <!-- Image Quiz Mode -->
                    <div id="image-quiz" class="quiz-pane hidden">
                        <div class="image-quiz-card">
                            <div id="image-quiz-image" class="image-quiz-image" aria-label="Guess the word by image"></div>
                            <div class="image-quiz-meta">
                                <h2>Type the French word</h2>
                                <p id="image-quiz-hint" class="image-quiz-hint"></p>
                            </div>
                        </div>
                        <div class="answer-input">
                            <input type="text" id="image-quiz-answer" placeholder="Tape le mot en franÃ§ais...">
                            <button id="image-quiz-check">Check</button>
                        </div>
                        <div id="image-quiz-feedback" class="feedback hidden">
                            <p id="image-quiz-feedback-text"></p>
                            <button id="image-quiz-next">Continue</button>
                            <span id="image-quiz-page" class="page-info"></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Listening Section -->
            <div id="listening-section" class="section">
                <div class="listening-container">
                    <div class="content-selector">
                        <h2>Choose Listening Content:</h2>
                        <div class="content-buttons">
                            <button class="content-btn" data-type="news">ðŸ“° News</button>
                            <button class="content-btn" data-type="stories">ðŸ“š Stories</button>
                            <button class="content-btn" data-type="conversations">ðŸ’¬ Conversations</button>
                        </div>
                    </div>

                    <div class="audio-player hidden">
                        <div class="audio-info">
                            <h3 id="audio-title">Loading...</h3>
                            <p id="audio-description">Please wait...</p>
                        </div>

                        <div class="listening-nav">
                            <button id="listen-prev">Prev</button>
                            <span id="listen-page-info">1 / 1</span>
                            <button id="listen-next">Next</button>
                        </div>
                        
                        <div class="audio-controls">
                            <audio id="french-audio" controls>
                                <source src="" type="audio/mpeg">
                                Your browser does not support the audio element.
                            </audio>
                        </div>

                        <div class="transcript-section">
                            <button id="toggle-transcript">Show Transcript</button>
                            <div id="transcript" class="transcript hidden">
                                <p id="transcript-text"></p>
                            </div>
                        </div>

                        <div class="comprehension-questions">
                            <h4>Comprehension Questions:</h4>
                            <div id="questions-container"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dictionary Section -->
            <div id="dictionary-section" class="section">
                <div class="dictionary-container">
                    <h2>French Dictionary (Learner-friendly)</h2>
                    <div class="dict-controls">
                        <input type="text" id="dict-search" placeholder="Search French or English...">
                        <select id="dict-group">
                            <option value="all">All Groups</option>
                            <option value="basics">Basics</option>
                            <option value="people">People</option>
                            <option value="food">Food</option>
                            <option value="travel">Travel</option>
                            <option value="places">Places</option>
                            <option value="time">Time</option>
                            <option value="verbs">Verbs</option>
                            <option value="adjectives">Adjectives</option>
                            <option value="numbers">Numbers</option>
                        </select>
                        <select id="dict-level">
                            <option value="all">All Levels</option>
                            <option value="A1">A1</option>
                            <option value="A2">A2</option>
                            <option value="B1">B1</option>
                        </select>
                        <select id="dict-sort">
                            <option value="fr">Sort: French (Aâ†’Z)</option>
                            <option value="en">Sort: English (Aâ†’Z)</option>
                            <option value="level">Sort: Level (A1â†’B1)</option>
                        </select>
                        <select id="dict-order">
                            <option value="asc">Asc</option>
                            <option value="desc">Desc</option>
                        </select>
                        <label class="dict-flag"><input type="checkbox" id="dict-fr-only"> French only</label>
                    </div>

                    <div id="dict-list" class="dict-list"></div>

                    <div class="dict-pagination">
                        <button id="dict-prev" class="page-btn" disabled>Prev</button>
                        <span id="dict-page-info">Page 1</span>
                        <button id="dict-next" class="page-btn">Next</button>
                    </div>
                </div>
            </div>

            <!-- Profile Section -->
            <div id="profile-section" class="section">
                <div class="profile-container">
                    <h2>Your Profile</h2>
                    <div class="profile-top">
                        <div class="avatar-current">
                            <img id="current-avatar" src="assets/1.png" alt="Current avatar">
                        </div>
                        <div class="profile-meta">
                            <div class="profile-row">
                                <label>Display Name</label>
                                <input id="profile-name" type="text" placeholder="Enter your name">
                            </div>
                            
                        </div>
                    </div>
                    <h3>Choose Your Shinchan Pose</h3>
                    <div id="avatar-grid" class="avatar-grid">
                        <!-- Populated by app.js -->
                    </div>
                </div>
            </div>
        </main>

        <div class="hint hidden">
            <p>Hint: <span id="hint-text"></span></p>
        </div>
    </div>

    <!-- Mascot: Shinchan image -->
    <div id="mascot" title="Cliquez-moi !">
        <img src="assets/1.png" alt="Shinchan mascot" />
    </div>
    <div id="mascot-speech" class="hidden">
        <div class="bubble">Bonjour! Cliquez-moi pour un conseil ðŸ‡«ðŸ‡·</div>
    </div>

    <!-- Firebase SDKs (compat) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script type="module" src="/src/main.js"></script>
</body>
</html>
